# waterCheck
Flask app that estimates water quality in a lake based on historical beach safety and precipitation data

So far, the application was developed using Toronto data, but other cities can be added following the same procedure. The format of the beach safety file might be different so code might need to be tweaked to make sure that information can be read correctly. When the location is added, a file with water status history is added to S3 bucket and processed by a flask app to extract beach name and dates when it was closed. This data is added to DynamoDB city name table with beach name and a date when the beach was closed. Then historical precipitation data is downloaded using Open Weather API for the period corresponding to the data in the water status history file and saved into DynamoDB table called city-rain. Knowing that results of the measurements are delayed by 1 day, the data is then again processed and precipitation value of day the beach was closed â€“ 1 is saved into city_day_before_p DynamoDB table, along with beach name and date. To account for most prevalent values of precipitation, the 90th percentile is then calculated for each beach and saved into a beach-precipitation table in DynamoDB. This is how we can see what precipitation level can cause the water to be unsafe to swim. 
Once new location is added, the markers need to be added to the map, by adding code in the JavaScript map.js file.
The Applications automatically downloads data on precipitation (once a day) from given locations and saves it into city-rain-forecast table in DynamoDB. This is achieved by running a Lambda function that accesses /forecast link, which then downloads forecast from Open Weather API and saves onto DynamoDB. The Lambda function is schedule to run once daily by Event Bridge. After downloading the data, app processes it against precipitation numbers needed to deem beach unsafe and updates the status on the website.

